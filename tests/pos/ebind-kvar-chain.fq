fixpoint "--eliminate=some"

// This file CRASHes with --eliminate=some
// Commenting out any one of these constraints will fix that

// This file is SAFE with --eliminate=none
// It solves both `kvar`s to `true`
// However, commenting out either qualifier will make it UNSAFE.

qualif Auto(v : int, m : int): (v = (m + 2))
qualif Auto(v : int, x : int): (v = x)

ebind 15 n    : { int }

bind  16 m    : { _ : int | true  }
bind  18 one  : { v : int | v = 1 }

constraint:
  env [15]
  lhs {v3 : Tuple | true }
  rhs {v3 : Tuple | $k2  }
  id 3 tag []

constraint:
  env [15]
  lhs {v4 : int | $k1[vk1:=v4] }
  rhs {v4 : int | v4 = n       }
  id 4 tag []

constraint:
  env [16; 18]
  lhs {v5 : int | v5 = m + 1   }
  rhs {v5 : int | $k1[vk1:=v5] }
  id 5 tag []

wf:
  env [16]
  reft {vk1 : int   | [$k1]}
